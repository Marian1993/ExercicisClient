<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form method="post" action="https://politecnicllevant.cat">
    <label>Nom</label>
    <input name="nom">
    <label>Telèfon</label>
    <input name="telefon">
    <label>Contrasenya</label>
    <input name="contrasenya">
    <label>Repetir contrasenya</label>
    <input name="contrasenya-repetir">
    <input type="submit" value="Enviar">
</form>

<script>
    document.querySelector("form").addEventListener('submit',function (event){

        if (validarFormulari()){
            console.log("Enviant formulari");
        }else {
            //Cancela el comportament per defecte, en cas del formulari no s'enviara
            event.preventDefault();
        }
    });



    function validarFormulari() {

        var valNom = validarNom();
        var valTel = validarTelefon();
        var valCon = validarContrasenya();

        if(valNom && valTel && valCon){
            return true;
        }else {
            return false;
        }
    }
    function validarNom() {

        var name = document.querySelector('[name="nom"]');

        //Aquesta expressió regular fa que no pugui contenir cap número
        var patron = /[\d]/;

        if(name.value.trim() === "" || patron.test(name.value.trim())){
            name.style.backgroundColor = "red";
            return false;
        }else{
            name.style.backgroundColor = "white";
            return true;
        }
    }

    function validarTelefon() {

        var telefon = document.querySelector('[name="telefon"]');

        //Aquesra expressió regular fa que no pugui contenir cap lletra
        var patron = /[\D]/;

        if (telefon.value.trim() === "" || telefon.value.trim().length > 9 || telefon.value.trim().length < 9 || patron.test(telefon.value.trim())){
            telefon.style.backgroundColor = "red";
            return false;
        }else {
            telefon.style.backgroundColor = "white";
            return true;
        }
    }

    function validarContrasenya() {

        var contrasenya = document.querySelector('[name="contrasenya"]');
        var contRepetida = document.querySelector('[name="contrasenya-repetir"]');

        if (contrasenya.value !== contRepetida.value || contrasenya.value === "" || contRepetida.value === "" || (contrasenya.value.length && contRepetida.value.length > 8) || (contrasenya.value.length && contRepetida.value.length < 6)){
            contrasenya.style.backgroundColor = "red";
            contRepetida.style.backgroundColor = "red";
            return false;
        }else {
            contrasenya.style.backgroundColor = "white";
            contRepetida.style.backgroundColor = "white";
            return true;
        }
    }
</script>
</body>
</html>